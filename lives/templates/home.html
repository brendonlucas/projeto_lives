{% extends 'base.html' %}
{% block 'content' %}
<style>
    .custom-card {
        width: 100%;
        padding: 20px 15px;
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        transition: transform .2s ease, box-shadow .2s ease;
    }

    .custom-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 14px rgba(0,0,0,0.25);
    }

    /* Imagem redonda com sombra */
    .profile-img {
        width: 130px;
        height: 130px;
        object-fit: cover;
        border-radius: 50%;
        box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    }

    /* Botão inferior */
    .card-btn {
        margin-top: 20px;
        border-radius: 0 0 14px 14px;
        font-weight: bold;
        padding: 10px;
    }
</style>


<section class="shadow-card theme-select" style=" padding:20px;margin:10px; border-radius:10px">
    <div class="card" style="padding:10px 10px 0px 10px; margin:10px">
        <div class="d-flex ">
            <div class="mr-auto p-2 align-self-center"><h3> {{ fac.nome }}</h3></div>
            <div class="form-group d-flex p-2">
                <label class="form-label p-2" for="facSelect">Fac:</label>
                <select class="form-control" id="facSelect" style="max-width:150px">
                    <option selected disabled>Selecione a fac</option>
                    {% for fac in facs %}
                    <a href="www.google.com">
                        <option value="{{ fac.pk }}"> {{ fac.nome }}</option>
                    </a>
                    {% endfor %}

                </select>
            </div>


            <div class="dropdown p-2">
                <button class="btn btn-md btn-primary btn-addon m-b-10 m-l-5 dropdown-toggle" type="button"
                        data-toggle="dropdown" aria-expanded="false"><i class="ti-plus"></i> Adicionar
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#" data-toggle="modal"
                       data-target="#MOdalAdicionarVeiculo">FAC</a>
                    <a class="dropdown-item" href="#" data-toggle="modal"
                       data-target="#MOdalAdicionarCanal">Streamer</a>

                </div>
            </div>
            <div class="p-2">
                <button type="submit" class="btn btn-primary" onclick="ordenarTabela()"><i class="ti-search"></i>
                    ordenar
                </button>
            </div>
        </div>

        <div class="modal fade" data-backdrop="static" id="MOdalAdicionarVeiculo" tabindex="-1" role="dialog"
             aria-labelledby="ModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="veiculoModalCenterTitle">Adicionar FAC</h5>
                    </div>
                    <form method="post" action="{% url 'add_fac' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-body d-flex justify-content">
                            <div style="margin:10px; padding:5px; width:100%; max-height:400px; overflow-y: auto;">
                                <div class="form-group">
                                    <label>Nome da FAC</label>
                                    <input type="text" class="form-control" placeholder="" name="name_fac">
                                </div>
                                <div class="form-group">
                                    <label>Descrição</label>
                                    <input type="text" class="form-control" placeholder="" name="desc_fac">
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <div class="mr-auto">
                                <i class="mr-auto"> - Preencha os campos adequadamente </i> <br>
                            </div>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="submit" class="btn btn-primary">Enviar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" data-backdrop="static" id="MOdalAdicionarCanal" tabindex="-1" role="dialog"
             aria-labelledby="ModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="canelModalCenterTitle">Adicionar FAC</h5>
                    </div>
                    <form method="post" action="{% url 'add_streamer' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="modal-body d-flex justify-content">

                            <div style="margin:10px; padding:5px; width:100%; max-height:400px; overflow-y: auto;">
                                <div class="form-group">
                                    <label>Fac:</label>
                                    <select class="form-control" name="selectFacPlayer" required>
                                        <option selected disabled>Selecione a fac</option>
                                        {% for fac in facs %}
                                        <option value="{{ fac.pk }}"> {{ fac.nome }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Nome do canal</label>
                                    <input type="text" class="form-control" placeholder="" name="name_canal">
                                </div>
                                <div class="form-group">
                                    <label>Nome do canal</label>
                                    <input type="text" class="form-control" placeholder="" name="name_nick">
                                </div>
                                <div class="form-group">
                                    <label>Link Youtube</label>
                                    <input type="text" class="form-control" placeholder="" name="name_yt">
                                </div>
                                <div class="form-group">
                                    <label>Link Kick</label>
                                    <input type="text" class="form-control" placeholder="" name="name_kick">
                                </div>
                                <div class="form-group">
                                    <label>Link Twitch</label>
                                    <input type="text" class="form-control" placeholder="" name="name_tw">
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <div class="mr-auto">
                                <i class="mr-auto"> - Preencha os campos adequadamente </i> <br>
                            </div>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            <button type="submit" class="btn btn-primary">Enviar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="card" style="padding:10px 10px 10px 10px; margin:10px">
        <div class="container mt-4 ">
            <div class="row">
                {% for fac in facs %}
                <div class="col-md-3 mb-4 d-flex justify-content-center ">
                    <div class="custom-card text-center shadow-card theme-select">
                        <!-- Imagem circular -->
                        <img src="https://i.pinimg.com/originals/29/47/9b/29479ba0435741580ca9f4a467be6207.png" class="profile-img" alt="Imagem">
                        <!-- Nome -->
                        <h5 class="mt-3">{{ fac.nome }}</h5>
                        <!-- Botão -->
                        <a href="{% url 'show_live_fac' fac.pk %}" class="btn btn-primary btn-block card-btn">Visualizar</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>


    </div>
</section>

<script>
    document.getElementById('facSelect').addEventListener('change', function() {
        const pk = this.value;
        if (pk) {
            const url = "{% url 'show_live_fac' 0 %}".replace('0', pk);
            window.location.href = url;
        }
    });
</script>

{% endblock %}